{"ast":null,"code":"var _jsxFileName = \"/Users/estherchung/Desktop/pop-culture/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { db, auth, functions } from './firebase';\nimport { doc, setDoc, getDoc, onSnapshot, updateDoc } from 'firebase/firestore';\nimport { httpsCallable } from 'firebase/functions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [gameState, setGameState] = useState('lobby'); // 'lobby', 'waiting', 'playing', 'results'\n  const [roomId, setRoomId] = useState('');\n  const [playerId, setPlayerId] = useState('');\n  const [isHost, setIsHost] = useState(false);\n  const [gameResults, setGameResults] = useState(null);\n  const [remoteStream, setRemoteStream] = useState(null);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const referenceVideoRef = useRef(null);\n  const referenceCanvasRef = useRef(null);\n  const remoteVideoRef = useRef(null);\n  const poseRef = useRef(null);\n  const referencePoseRef = useRef(null);\n  const pcRef = useRef(null);\n  const [isReferenceVideoReady, setIsReferenceVideoReady] = useState(false);\n  const [isWebcamReady, setIsWebcamReady] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [similarityScore, setSimilarityScore] = useState(0);\n  const [isVideoEnded, setIsVideoEnded] = useState(false);\n  const [countdown, setCountdown] = useState(null);\n  const countdownRef = useRef(null);\n  const scoreHistoryRef = useRef([]);\n  const [showFinalScore, setShowFinalScore] = useState(false);\n  const wsRef = useRef(null);\n\n  // Firebase Functions\n  const createRoomFunction = httpsCallable(functions, 'createRoom');\n  const joinRoomFunction = httpsCallable(functions, 'joinRoom');\n  const startGameFunction = httpsCallable(functions, 'startGame');\n  const submitScoreFunction = httpsCallable(functions, 'submitScore');\n  const handleOfferFunction = httpsCallable(functions, 'handleOffer');\n  const handleAnswerFunction = httpsCallable(functions, 'handleAnswer');\n  const handleIceCandidateFunction = httpsCallable(functions, 'handleIceCandidate');\n  const calculateAverageScore = scores => {\n    if (!scores || scores.length === 0) return 0;\n    const sum = scores.reduce((acc, score) => acc + score, 0);\n    return sum / scores.length * 100; // Convert to percentage\n  };\n  const onResults = useCallback(results => {\n    if (!canvasRef.current) return;\n    const canvasElement = canvasRef.current;\n    const canvasCtx = canvasElement.getContext(\"2d\");\n    canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);\n    canvasCtx.drawImage(results.image, 0, 0, canvasElement.width, canvasElement.height);\n    if (results.poseLandmarks) {\n      window.drawConnectors(canvasCtx, results.poseLandmarks, window.POSE_CONNECTIONS, {\n        color: '#00FF00',\n        lineWidth: 2\n      });\n      window.drawLandmarks(canvasCtx, results.poseLandmarks, {\n        color: '#FF0000',\n        lineWidth: 1,\n        radius: 3\n      });\n\n      // Send pose data to server\n      sendPoseData(results.poseLandmarks);\n      if (isPlaying && !isVideoEnded) {\n        var _referencePoseRef$cur, _referencePoseRef$cur2;\n        const referenceLandmarks = (_referencePoseRef$cur = referencePoseRef.current) === null || _referencePoseRef$cur === void 0 ? void 0 : (_referencePoseRef$cur2 = _referencePoseRef$cur.lastResults) === null || _referencePoseRef$cur2 === void 0 ? void 0 : _referencePoseRef$cur2.poseLandmarks;\n        if (referenceLandmarks) {\n          const score = calculateCosineSimilarity(results.poseLandmarks, referenceLandmarks);\n          scoreHistoryRef.current.push(score);\n          if (scoreHistoryRef.current.length % 5 === 0) {\n            const averageScore = calculateAverageScore(scoreHistoryRef.current);\n            setSimilarityScore(averageScore);\n          }\n        }\n      }\n    }\n  }, [isPlaying, isVideoEnded]);\n  const onReferenceResults = useCallback(results => {\n    if (!referenceCanvasRef.current) return;\n    const canvasElement = referenceCanvasRef.current;\n    const canvasCtx = canvasElement.getContext(\"2d\");\n\n    // Clear the canvas\n    canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);\n\n    // Draw the video frame\n    canvasCtx.drawImage(results.image, 0, 0, canvasElement.width, canvasElement.height);\n    if (results.poseLandmarks) {\n      // Draw the pose landmarks\n      window.drawConnectors(canvasCtx, results.poseLandmarks, window.POSE_CONNECTIONS, {\n        color: '#00FF00',\n        lineWidth: 2\n      });\n      window.drawLandmarks(canvasCtx, results.poseLandmarks, {\n        color: '#FF0000',\n        lineWidth: 1,\n        radius: 3\n      });\n\n      // Store reference poses if playing\n      if (isPlaying) {\n        referencePoseRef.current.lastResults = results;\n      }\n    }\n  }, [isPlaying]);\n  useEffect(() => {\n    // Initialize MediaPipe Pose for user video\n    const pose = new window.Pose({\n      locateFile: file => {\n        return `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`;\n      }\n    });\n\n    // Initialize MediaPipe Pose for reference video\n    const referencePose = new window.Pose({\n      locateFile: file => {\n        return `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`;\n      }\n    });\n\n    // Set options after a small delay to ensure proper initialization\n    setTimeout(() => {\n      pose.setOptions({\n        modelComplexity: 1,\n        smoothLandmarks: true,\n        minDetectionConfidence: 0.5,\n        minTrackingConfidence: 0.5\n      });\n      referencePose.setOptions({\n        modelComplexity: 1,\n        smoothLandmarks: true,\n        minDetectionConfidence: 0.5,\n        minTrackingConfidence: 0.5\n      });\n      pose.onResults(onResults);\n      referencePose.onResults(onReferenceResults);\n      poseRef.current = pose;\n      referencePoseRef.current = referencePose;\n    }, 100);\n\n    // Access webcam\n    navigator.mediaDevices.getUserMedia({\n      video: true\n    }).then(stream => {\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        videoRef.current.onloadedmetadata = () => {\n          videoRef.current.play().then(() => setIsWebcamReady(true)).catch(err => console.error(\"Error playing webcam:\", err));\n        };\n      }\n    }).catch(err => {\n      console.error(\"Error accessing webcam:\", err);\n    });\n    return () => {\n      // Cleanup\n      if (poseRef.current) {\n        poseRef.current.close();\n      }\n      if (referencePoseRef.current) {\n        referencePoseRef.current.close();\n      }\n    };\n  }, [onResults, onReferenceResults]);\n  const calculateMovementVector = (pose1, pose2) => {\n    if (!pose1 || !pose2) return null;\n    const vector = [];\n    for (let i = 0; i < pose1.length; i++) {\n      if (pose1[i] && pose2[i]) {\n        vector.push({\n          x: pose2[i].x - pose1[i].x,\n          y: pose2[i].y - pose1[i].y\n        });\n      }\n    }\n    return vector;\n  };\n  const calculateCosineSimilarity = (vec1, vec2) => {\n    if (!vec1 || !vec2 || vec1.length !== vec2.length) return 0;\n    let dotProduct = 0;\n    let magnitude1 = 0;\n    let magnitude2 = 0;\n    for (let i = 0; i < vec1.length; i++) {\n      if (vec1[i] && vec2[i]) {\n        dotProduct += vec1[i].x * vec2[i].x + vec1[i].y * vec2[i].y;\n        magnitude1 += vec1[i].x * vec1[i].x + vec1[i].y * vec1[i].y;\n        magnitude2 += vec2[i].x * vec2[i].x + vec2[i].y * vec2[i].y;\n      }\n    }\n    magnitude1 = Math.sqrt(magnitude1);\n    magnitude2 = Math.sqrt(magnitude2);\n    if (magnitude1 === 0 || magnitude2 === 0) return 0;\n\n    // Convert cosine similarity from [-1, 1] to [0, 1] and add 50\n    const similarity = (dotProduct / (magnitude1 * magnitude2) + 1) / 2;\n    return similarity * 50 + 50;\n  };\n  const calculateSimilarity = () => {\n    if (referencePoseRef.current.lastResults && onResults.current) {\n      const referenceLandmarks = referencePoseRef.current.lastResults.poseLandmarks;\n      const userLandmarks = onResults.current.poseLandmarks;\n      return calculateCosineSimilarity(userLandmarks, referenceLandmarks);\n    }\n    return 0;\n  };\n  const handleVideoEnd = async () => {\n    setIsPlaying(false);\n    setIsVideoEnded(true);\n    const score = calculateSimilarity();\n    setSimilarityScore(score);\n    referencePoseRef.current.lastResults = null;\n\n    // Submit score\n    await submitScore(score);\n  };\n  const startCountdown = () => {\n    setCountdown(3);\n  };\n  useEffect(() => {\n    let timer;\n    if (countdown > 0) {\n      timer = setTimeout(() => {\n        setCountdown(countdown - 1);\n      }, 1000);\n    } else if (countdown === 0) {\n      // Start the video when countdown reaches 0\n      if (referenceVideoRef.current) {\n        referenceVideoRef.current.play();\n        setIsPlaying(true);\n        setIsVideoEnded(false);\n        setSimilarityScore(null);\n      }\n      setCountdown(null);\n    }\n    return () => {\n      if (timer) clearTimeout(timer);\n    };\n  }, [countdown]);\n  const togglePlayPause = () => {\n    if (referenceVideoRef.current) {\n      if (isPlaying) {\n        referenceVideoRef.current.pause();\n        setIsPlaying(false);\n        setIsVideoEnded(true);\n      } else {\n        startCountdown();\n      }\n    }\n  };\n  const restartVideo = () => {\n    if (referenceVideoRef.current) {\n      referenceVideoRef.current.currentTime = 0;\n      setIsPlaying(false);\n      setIsVideoEnded(true);\n      setSimilarityScore(null);\n    }\n  };\n  const handleReferenceVideoLoad = () => {\n    if (referenceVideoRef.current) {\n      setIsReferenceVideoReady(true);\n    }\n  };\n  useEffect(() => {\n    let animationFrameId;\n    let lastProcessTime = 0;\n    const processInterval = 1000 / 30; // Process at 30fps\n\n    const processFrame = async timestamp => {\n      if (timestamp - lastProcessTime >= processInterval) {\n        try {\n          if (videoRef.current && poseRef.current && isWebcamReady) {\n            await poseRef.current.send({\n              image: videoRef.current\n            });\n          }\n          if (referenceVideoRef.current && referencePoseRef.current && isReferenceVideoReady && isPlaying) {\n            await referencePoseRef.current.send({\n              image: referenceVideoRef.current\n            });\n          }\n          lastProcessTime = timestamp;\n        } catch (error) {\n          console.error(\"Error processing frame:\", error);\n        }\n      }\n      animationFrameId = requestAnimationFrame(processFrame);\n    };\n    processFrame(0);\n    return () => {\n      if (animationFrameId) {\n        cancelAnimationFrame(animationFrameId);\n      }\n    };\n  }, [isWebcamReady, isReferenceVideoReady, isPlaying]);\n\n  // WebRTC configuration\n  const configuration = {\n    iceServers: [{\n      urls: 'stun:stun.l.google.com:19302'\n    }]\n  };\n\n  // Initialize WebRTC\n  const initializeWebRTC = async () => {\n    try {\n      const pc = new RTCPeerConnection(configuration);\n      pcRef.current = pc;\n\n      // Handle incoming tracks\n      pc.ontrack = event => {\n        setRemoteStream(event.streams[0]);\n        if (remoteVideoRef.current) {\n          remoteVideoRef.current.srcObject = event.streams[0];\n        }\n      };\n\n      // Handle ICE candidates\n      pc.onicecandidate = event => {\n        if (event.candidate) {\n          handleIceCandidateFunction({\n            roomId,\n            playerId,\n            candidate: event.candidate\n          });\n        }\n      };\n\n      // Get local stream\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: true\n      });\n      stream.getTracks().forEach(track => {\n        pc.addTrack(track, stream);\n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n      }\n      return pc;\n    } catch (error) {\n      console.error('Error initializing WebRTC:', error);\n    }\n  };\n\n  // Handle signaling\n  const handleSignaling = async pc => {\n    if (isHost) {\n      // Create and send offer\n      const offer = await pc.createOffer();\n      await pc.setLocalDescription(offer);\n      await handleOfferFunction({\n        roomId,\n        playerId,\n        offer\n      });\n\n      // Listen for answer\n      const unsubscribe = onSnapshot(doc(db, 'rooms', roomId), async doc => {\n        var _data$signaling, _data$signaling$answe;\n        const data = doc.data();\n        const answer = (_data$signaling = data.signaling) === null || _data$signaling === void 0 ? void 0 : (_data$signaling$answe = _data$signaling.answers) === null || _data$signaling$answe === void 0 ? void 0 : _data$signaling$answe[playerId];\n        if (answer && !pc.currentRemoteDescription) {\n          await pc.setRemoteDescription(new RTCSessionDescription(answer));\n        }\n      });\n      return unsubscribe;\n    } else {\n      // Listen for offer\n      const unsubscribe = onSnapshot(doc(db, 'rooms', roomId), async doc => {\n        var _data$signaling2, _data$signaling2$offe;\n        const data = doc.data();\n        const offer = (_data$signaling2 = data.signaling) === null || _data$signaling2 === void 0 ? void 0 : (_data$signaling2$offe = _data$signaling2.offers) === null || _data$signaling2$offe === void 0 ? void 0 : _data$signaling2$offe[data.hostId];\n        if (offer && !pc.currentRemoteDescription) {\n          await pc.setRemoteDescription(new RTCSessionDescription(offer));\n          const answer = await pc.createAnswer();\n          await pc.setLocalDescription(answer);\n          await handleAnswerFunction({\n            roomId,\n            playerId,\n            answer\n          });\n        }\n      });\n      return unsubscribe;\n    }\n  };\n\n  // Create a new game room\n  const createRoom = async () => {\n    try {\n      const result = await createRoomFunction();\n      const roomId = result.data.roomId;\n      const pc = await initializeWebRTC();\n      setRoomId(roomId);\n      setPlayerId(roomId);\n      setIsHost(true);\n      setGameState('waiting');\n\n      // Handle signaling\n      const unsubscribe = await handleSignaling(pc);\n\n      // Listen for room updates\n      onSnapshot(doc(db, 'rooms', roomId), doc => {\n        const data = doc.data();\n        if (data.gameStarted) {\n          startGame();\n        }\n        if (data.status === 'completed') {\n          setGameResults({\n            winnerId: data.winnerId,\n            scores: data.scores\n          });\n          setGameState('results');\n          unsubscribe();\n        }\n      });\n    } catch (error) {\n      console.error('Error creating room:', error);\n      alert('Failed to create game room');\n    }\n  };\n\n  // Join an existing room\n  const joinRoom = async () => {\n    try {\n      const playerId = Math.random().toString(36).substring(2, 8).toUpperCase();\n      await joinRoomFunction({\n        roomId,\n        playerId\n      });\n      const pc = await initializeWebRTC();\n      setPlayerId(playerId);\n      setGameState('waiting');\n\n      // Handle signaling\n      const unsubscribe = await handleSignaling(pc);\n\n      // Listen for game start and results\n      onSnapshot(doc(db, 'rooms', roomId), doc => {\n        const data = doc.data();\n        if (data.gameStarted) {\n          startGame();\n        }\n        if (data.status === 'completed') {\n          setGameResults({\n            winnerId: data.winnerId,\n            scores: data.scores\n          });\n          setGameState('results');\n          unsubscribe();\n        }\n      });\n    } catch (error) {\n      console.error('Error joining room:', error);\n      alert('Failed to join game room');\n    }\n  };\n\n  // Start the game\n  const startGame = async () => {\n    try {\n      await startGameFunction({\n        roomId\n      });\n      setGameState('playing');\n      startCountdown();\n    } catch (error) {\n      console.error('Error starting game:', error);\n      alert('Failed to start game');\n    }\n  };\n\n  // Submit score\n  const submitScore = async score => {\n    try {\n      await submitScoreFunction({\n        roomId,\n        playerId,\n        score\n      });\n    } catch (error) {\n      console.error('Error submitting score:', error);\n    }\n  };\n\n  // Connect to WebSocket\n  const connectWebSocket = () => {\n    const ws = new WebSocket(`ws://localhost:8000/ws/${roomId}/${playerId}`);\n    wsRef.current = ws;\n    ws.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'opponent_pose') {\n        // Update opponent's pose overlay\n        if (remoteVideoRef.current) {\n          const videoCtx = remoteVideoRef.current.getContext('2d');\n          videoCtx.clearRect(0, 0, remoteVideoRef.current.width, remoteVideoRef.current.height);\n          if (data.landmarks) {\n            window.drawConnectors(videoCtx, data.landmarks, window.POSE_CONNECTIONS, {\n              color: '#0000FF',\n              lineWidth: 2\n            });\n            window.drawLandmarks(videoCtx, data.landmarks, {\n              color: '#FF00FF',\n              lineWidth: 1,\n              radius: 3\n            });\n          }\n        }\n      } else if (data.type === 'game_result') {\n        setGameResults(data);\n        setGameState('results');\n      }\n    };\n  };\n\n  // Send pose data to server\n  const sendPoseData = landmarks => {\n    if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\n      var _referencePoseRef$cur3, _referencePoseRef$cur4;\n      wsRef.current.send(JSON.stringify({\n        landmarks: landmarks,\n        reference_landmarks: (_referencePoseRef$cur3 = referencePoseRef.current) === null || _referencePoseRef$cur3 === void 0 ? void 0 : (_referencePoseRef$cur4 = _referencePoseRef$cur3.lastResults) === null || _referencePoseRef$cur4 === void 0 ? void 0 : _referencePoseRef$cur4.poseLandmarks\n      }));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    style: {\n      textAlign: \"center\",\n      padding: \"20px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Dance Battle App\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 536,\n      columnNumber: 7\n    }, this), gameState === 'lobby' && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: '600px',\n        margin: '0 auto',\n        padding: '20px',\n        textAlign: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          fontSize: '48px',\n          marginBottom: '40px'\n        },\n        children: \"Dance Battle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#f0f0f0',\n          padding: '30px',\n          borderRadius: '15px',\n          marginBottom: '30px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            marginBottom: '20px'\n          },\n          children: \"Create Game\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: createRoom,\n          style: {\n            ...buttonStyle,\n            fontSize: '24px',\n            padding: '15px 30px',\n            backgroundColor: '#4CAF50'\n          },\n          children: \"Create New Game\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#f0f0f0',\n          padding: '30px',\n          borderRadius: '15px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            marginBottom: '20px'\n          },\n          children: \"Join Game\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            gap: '15px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: roomId,\n            onChange: e => setRoomId(e.target.value.toUpperCase()),\n            placeholder: \"Enter Game Code\",\n            style: {\n              ...inputStyle,\n              fontSize: '24px',\n              textAlign: 'center',\n              letterSpacing: '2px',\n              textTransform: 'uppercase'\n            },\n            maxLength: 6\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: joinRoom,\n            style: {\n              ...buttonStyle,\n              fontSize: '24px',\n              padding: '15px 30px',\n              backgroundColor: '#2196F3'\n            },\n            children: \"Join Game\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 9\n    }, this), gameState === 'waiting' && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Room Code: \", roomId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#f0f0f0',\n          padding: '20px',\n          borderRadius: '10px',\n          margin: '20px auto',\n          maxWidth: '400px',\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '18px',\n            marginBottom: '10px'\n          },\n          children: \"Share this code with your friend:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 620,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            gap: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundColor: 'white',\n              padding: '10px 20px',\n              borderRadius: '5px',\n              fontSize: '24px',\n              fontWeight: 'bold',\n              letterSpacing: '2px'\n            },\n            children: roomId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 627,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              navigator.clipboard.writeText(roomId);\n              alert('Room code copied to clipboard!');\n            },\n            style: {\n              ...buttonStyle,\n              backgroundColor: '#2196F3'\n            },\n            children: \"Copy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Waiting for opponent to join...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 651,\n        columnNumber: 11\n      }, this), isHost && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          updateDoc(doc(db, 'rooms', roomId), {\n            gameStarted: true\n          });\n        },\n        style: buttonStyle,\n        children: \"Start Game\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 653,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 610,\n      columnNumber: 9\n    }, this), gameState === 'playing' && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        gap: '20px',\n        justifyContent: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: videoContainerStyle,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Reference Dance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'relative'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            ref: referenceVideoRef,\n            src: \"/justdance1.mp4\",\n            playsInline: true,\n            onLoadedMetadata: handleReferenceVideoLoad,\n            style: videoStyle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 673,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: referenceCanvasRef,\n            style: canvasOverlayStyle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 672,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 670,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: videoContainerStyle,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Your Performance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 689,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'relative'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            ref: videoRef,\n            autoPlay: true,\n            playsInline: true,\n            style: {\n              ...videoStyle,\n              transform: 'scaleX(-1)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: canvasRef,\n            style: {\n              ...canvasOverlayStyle,\n              transform: 'scaleX(-1)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 690,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 688,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: videoContainerStyle,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Opponent's Performance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 706,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'relative'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"video\", {\n            ref: remoteVideoRef,\n            autoPlay: true,\n            playsInline: true,\n            style: videoStyle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 708,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 707,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 705,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 668,\n      columnNumber: 9\n    }, this), gameState === 'results' && gameResults && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\n        color: 'white',\n        padding: '40px',\n        borderRadius: '20px',\n        textAlign: 'center',\n        zIndex: 1000\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Game Results\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 732,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '24px',\n          margin: '20px 0'\n        },\n        children: gameResults.winnerId === playerId ? 'You Won!' : 'Opponent Won!'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 733,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: '20px 0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Your Score: \", gameResults.scores[playerId], \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 737,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Opponent's Score: \", gameResults.scores[gameResults.winnerId === playerId ? gameResults.winnerId === gameResults.scores.player1_id ? gameResults.scores.player2_id : gameResults.scores.player1_id : gameResults.winnerId], \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 738,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 736,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setGameState('lobby');\n          setRoomId('');\n          setPlayerId('');\n          setGameResults(null);\n        },\n        style: buttonStyle,\n        children: \"Play Again\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 742,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 720,\n      columnNumber: 9\n    }, this), countdown !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: countdownStyle,\n      children: countdown\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 758,\n      columnNumber: 9\n    }, this), isPlaying && !isVideoEnded && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: scoreStyle,\n      children: [\"Similarity Score: \", similarityScore.toFixed(1), \"%\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 765,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 535,\n    columnNumber: 5\n  }, this);\n}\n\n// Styles\n_s(App, \"aJ2h1YCVq/tOEUzxi19UDpz5E0Y=\");\n_c = App;\nconst buttonStyle = {\n  padding: '10px 20px',\n  fontSize: '16px',\n  backgroundColor: '#4CAF50',\n  color: 'white',\n  border: 'none',\n  borderRadius: '5px',\n  cursor: 'pointer',\n  margin: '5px'\n};\nconst inputStyle = {\n  padding: '10px',\n  fontSize: '16px',\n  margin: '5px',\n  width: '200px'\n};\nconst videoContainerStyle = {\n  position: 'relative',\n  width: '400px',\n  marginBottom: '20px'\n};\nconst videoStyle = {\n  width: '100%',\n  height: 'auto',\n  borderRadius: '12px',\n  boxShadow: '0 0 10px rgba(0,0,0,0.3)',\n  display: 'block'\n};\nconst canvasOverlayStyle = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  width: '100%',\n  height: '100%',\n  borderRadius: '12px'\n};\nconst countdownStyle = {\n  position: 'fixed',\n  top: '50%',\n  left: '50%',\n  transform: 'translate(-50%, -50%)',\n  backgroundColor: 'rgba(0, 0, 0, 0.7)',\n  color: 'white',\n  padding: '40px',\n  borderRadius: '50%',\n  fontSize: '72px',\n  fontWeight: 'bold',\n  width: '150px',\n  height: '150px',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  zIndex: 1000\n};\nconst scoreStyle = {\n  position: 'fixed',\n  top: '20px',\n  right: '20px',\n  backgroundColor: 'rgba(0, 0, 0, 0.7)',\n  color: 'white',\n  padding: '20px',\n  borderRadius: '10px',\n  fontSize: '24px',\n  fontWeight: 'bold'\n};\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","db","auth","functions","doc","setDoc","getDoc","onSnapshot","updateDoc","httpsCallable","jsxDEV","_jsxDEV","App","_s","gameState","setGameState","roomId","setRoomId","playerId","setPlayerId","isHost","setIsHost","gameResults","setGameResults","remoteStream","setRemoteStream","videoRef","canvasRef","referenceVideoRef","referenceCanvasRef","remoteVideoRef","poseRef","referencePoseRef","pcRef","isReferenceVideoReady","setIsReferenceVideoReady","isWebcamReady","setIsWebcamReady","isPlaying","setIsPlaying","similarityScore","setSimilarityScore","isVideoEnded","setIsVideoEnded","countdown","setCountdown","countdownRef","scoreHistoryRef","showFinalScore","setShowFinalScore","wsRef","createRoomFunction","joinRoomFunction","startGameFunction","submitScoreFunction","handleOfferFunction","handleAnswerFunction","handleIceCandidateFunction","calculateAverageScore","scores","length","sum","reduce","acc","score","onResults","results","current","canvasElement","canvasCtx","getContext","clearRect","width","height","drawImage","image","poseLandmarks","window","drawConnectors","POSE_CONNECTIONS","color","lineWidth","drawLandmarks","radius","sendPoseData","_referencePoseRef$cur","_referencePoseRef$cur2","referenceLandmarks","lastResults","calculateCosineSimilarity","push","averageScore","onReferenceResults","pose","Pose","locateFile","file","referencePose","setTimeout","setOptions","modelComplexity","smoothLandmarks","minDetectionConfidence","minTrackingConfidence","navigator","mediaDevices","getUserMedia","video","then","stream","srcObject","onloadedmetadata","play","catch","err","console","error","close","calculateMovementVector","pose1","pose2","vector","i","x","y","vec1","vec2","dotProduct","magnitude1","magnitude2","Math","sqrt","similarity","calculateSimilarity","userLandmarks","handleVideoEnd","submitScore","startCountdown","timer","clearTimeout","togglePlayPause","pause","restartVideo","currentTime","handleReferenceVideoLoad","animationFrameId","lastProcessTime","processInterval","processFrame","timestamp","send","requestAnimationFrame","cancelAnimationFrame","configuration","iceServers","urls","initializeWebRTC","pc","RTCPeerConnection","ontrack","event","streams","onicecandidate","candidate","getTracks","forEach","track","addTrack","handleSignaling","offer","createOffer","setLocalDescription","unsubscribe","_data$signaling","_data$signaling$answe","data","answer","signaling","answers","currentRemoteDescription","setRemoteDescription","RTCSessionDescription","_data$signaling2","_data$signaling2$offe","offers","hostId","createAnswer","createRoom","result","gameStarted","startGame","status","winnerId","alert","joinRoom","random","toString","substring","toUpperCase","connectWebSocket","ws","WebSocket","onmessage","JSON","parse","type","videoCtx","landmarks","readyState","OPEN","_referencePoseRef$cur3","_referencePoseRef$cur4","stringify","reference_landmarks","className","style","textAlign","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","margin","fontSize","marginBottom","backgroundColor","borderRadius","onClick","buttonStyle","display","flexDirection","alignItems","gap","value","onChange","e","target","placeholder","inputStyle","letterSpacing","textTransform","maxLength","justifyContent","fontWeight","clipboard","writeText","flexWrap","videoContainerStyle","position","ref","src","playsInline","onLoadedMetadata","videoStyle","canvasOverlayStyle","autoPlay","transform","top","left","zIndex","player1_id","player2_id","countdownStyle","scoreStyle","toFixed","_c","border","cursor","boxShadow","right","$RefreshReg$"],"sources":["/Users/estherchung/Desktop/pop-culture/frontend/src/App.js"],"sourcesContent":["import React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { db, auth, functions } from './firebase';\nimport { doc, setDoc, getDoc, onSnapshot, updateDoc } from 'firebase/firestore';\nimport { httpsCallable } from 'firebase/functions';\n\nfunction App() {\n  const [gameState, setGameState] = useState('lobby'); // 'lobby', 'waiting', 'playing', 'results'\n  const [roomId, setRoomId] = useState('');\n  const [playerId, setPlayerId] = useState('');\n  const [isHost, setIsHost] = useState(false);\n  const [gameResults, setGameResults] = useState(null);\n  const [remoteStream, setRemoteStream] = useState(null);\n\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const referenceVideoRef = useRef(null);\n  const referenceCanvasRef = useRef(null);\n  const remoteVideoRef = useRef(null);\n  const poseRef = useRef(null);\n  const referencePoseRef = useRef(null);\n  const pcRef = useRef(null);\n  const [isReferenceVideoReady, setIsReferenceVideoReady] = useState(false);\n  const [isWebcamReady, setIsWebcamReady] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [similarityScore, setSimilarityScore] = useState(0);\n  const [isVideoEnded, setIsVideoEnded] = useState(false);\n  const [countdown, setCountdown] = useState(null);\n  const countdownRef = useRef(null);\n  const scoreHistoryRef = useRef([]);\n  const [showFinalScore, setShowFinalScore] = useState(false);\n  const wsRef = useRef(null);\n\n  // Firebase Functions\n  const createRoomFunction = httpsCallable(functions, 'createRoom');\n  const joinRoomFunction = httpsCallable(functions, 'joinRoom');\n  const startGameFunction = httpsCallable(functions, 'startGame');\n  const submitScoreFunction = httpsCallable(functions, 'submitScore');\n  const handleOfferFunction = httpsCallable(functions, 'handleOffer');\n  const handleAnswerFunction = httpsCallable(functions, 'handleAnswer');\n  const handleIceCandidateFunction = httpsCallable(functions, 'handleIceCandidate');\n\n  const calculateAverageScore = (scores) => {\n    if (!scores || scores.length === 0) return 0;\n    const sum = scores.reduce((acc, score) => acc + score, 0);\n    return (sum / scores.length) * 100; // Convert to percentage\n  };\n\n  const onResults = useCallback((results) => {\n    if (!canvasRef.current) return;\n    \n    const canvasElement = canvasRef.current;\n    const canvasCtx = canvasElement.getContext(\"2d\");\n\n    canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);\n    canvasCtx.drawImage(results.image, 0, 0, canvasElement.width, canvasElement.height);\n\n    if (results.poseLandmarks) {\n      window.drawConnectors(canvasCtx, results.poseLandmarks, window.POSE_CONNECTIONS,\n        { color: '#00FF00', lineWidth: 2 });\n      window.drawLandmarks(canvasCtx, results.poseLandmarks,\n        { color: '#FF0000', lineWidth: 1, radius: 3 });\n\n      // Send pose data to server\n      sendPoseData(results.poseLandmarks);\n\n      if (isPlaying && !isVideoEnded) {\n        const referenceLandmarks = referencePoseRef.current?.lastResults?.poseLandmarks;\n        if (referenceLandmarks) {\n          const score = calculateCosineSimilarity(results.poseLandmarks, referenceLandmarks);\n          scoreHistoryRef.current.push(score);\n          if (scoreHistoryRef.current.length % 5 === 0) {\n            const averageScore = calculateAverageScore(scoreHistoryRef.current);\n            setSimilarityScore(averageScore);\n          }\n        }\n      }\n    }\n  }, [isPlaying, isVideoEnded]);\n\n  const onReferenceResults = useCallback((results) => {\n    if (!referenceCanvasRef.current) return;\n    \n    const canvasElement = referenceCanvasRef.current;\n    const canvasCtx = canvasElement.getContext(\"2d\");\n\n    // Clear the canvas\n    canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);\n\n    // Draw the video frame\n    canvasCtx.drawImage(results.image, 0, 0, canvasElement.width, canvasElement.height);\n\n    if (results.poseLandmarks) {\n      // Draw the pose landmarks\n      window.drawConnectors(canvasCtx, results.poseLandmarks, window.POSE_CONNECTIONS,\n        { color: '#00FF00', lineWidth: 2 });\n      window.drawLandmarks(canvasCtx, results.poseLandmarks,\n        { color: '#FF0000', lineWidth: 1, radius: 3 });\n\n      // Store reference poses if playing\n      if (isPlaying) {\n        referencePoseRef.current.lastResults = results;\n      }\n    }\n  }, [isPlaying]);\n\n  useEffect(() => {\n    // Initialize MediaPipe Pose for user video\n    const pose = new window.Pose({\n      locateFile: (file) => {\n        return `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`;\n      }\n    });\n\n    // Initialize MediaPipe Pose for reference video\n    const referencePose = new window.Pose({\n      locateFile: (file) => {\n        return `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`;\n      }\n    });\n\n    // Set options after a small delay to ensure proper initialization\n    setTimeout(() => {\n      pose.setOptions({\n        modelComplexity: 1,\n        smoothLandmarks: true,\n        minDetectionConfidence: 0.5,\n        minTrackingConfidence: 0.5\n      });\n\n      referencePose.setOptions({\n        modelComplexity: 1,\n        smoothLandmarks: true,\n        minDetectionConfidence: 0.5,\n        minTrackingConfidence: 0.5\n      });\n\n      pose.onResults(onResults);\n      referencePose.onResults(onReferenceResults);\n      poseRef.current = pose;\n      referencePoseRef.current = referencePose;\n    }, 100);\n\n    // Access webcam\n    navigator.mediaDevices.getUserMedia({ video: true })\n      .then((stream) => {\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n          videoRef.current.onloadedmetadata = () => {\n            videoRef.current.play()\n              .then(() => setIsWebcamReady(true))\n              .catch(err => console.error(\"Error playing webcam:\", err));\n          };\n        }\n      })\n      .catch((err) => {\n        console.error(\"Error accessing webcam:\", err);\n      });\n\n    return () => {\n      // Cleanup\n      if (poseRef.current) {\n        poseRef.current.close();\n      }\n      if (referencePoseRef.current) {\n        referencePoseRef.current.close();\n      }\n    };\n  }, [onResults, onReferenceResults]);\n\n  const calculateMovementVector = (pose1, pose2) => {\n    if (!pose1 || !pose2) return null;\n    \n    const vector = [];\n    for (let i = 0; i < pose1.length; i++) {\n      if (pose1[i] && pose2[i]) {\n        vector.push({\n          x: pose2[i].x - pose1[i].x,\n          y: pose2[i].y - pose1[i].y\n        });\n      }\n    }\n    return vector;\n  };\n\n  const calculateCosineSimilarity = (vec1, vec2) => {\n    if (!vec1 || !vec2 || vec1.length !== vec2.length) return 0;\n\n    let dotProduct = 0;\n    let magnitude1 = 0;\n    let magnitude2 = 0;\n\n    for (let i = 0; i < vec1.length; i++) {\n      if (vec1[i] && vec2[i]) {\n        dotProduct += vec1[i].x * vec2[i].x + vec1[i].y * vec2[i].y;\n        magnitude1 += vec1[i].x * vec1[i].x + vec1[i].y * vec1[i].y;\n        magnitude2 += vec2[i].x * vec2[i].x + vec2[i].y * vec2[i].y;\n      }\n    }\n\n    magnitude1 = Math.sqrt(magnitude1);\n    magnitude2 = Math.sqrt(magnitude2);\n\n    if (magnitude1 === 0 || magnitude2 === 0) return 0;\n    \n    // Convert cosine similarity from [-1, 1] to [0, 1] and add 50\n    const similarity = (dotProduct / (magnitude1 * magnitude2) + 1) / 2;\n    return (similarity * 50) + 50;\n  };\n\n  const calculateSimilarity = () => {\n    if (referencePoseRef.current.lastResults && onResults.current) {\n      const referenceLandmarks = referencePoseRef.current.lastResults.poseLandmarks;\n      const userLandmarks = onResults.current.poseLandmarks;\n      return calculateCosineSimilarity(userLandmarks, referenceLandmarks);\n    }\n    return 0;\n  };\n\n  const handleVideoEnd = async () => {\n    setIsPlaying(false);\n    setIsVideoEnded(true);\n    const score = calculateSimilarity();\n    setSimilarityScore(score);\n    referencePoseRef.current.lastResults = null;\n    \n    // Submit score\n    await submitScore(score);\n  };\n\n  const startCountdown = () => {\n    setCountdown(3);\n  };\n\n  useEffect(() => {\n    let timer;\n    if (countdown > 0) {\n      timer = setTimeout(() => {\n        setCountdown(countdown - 1);\n      }, 1000);\n    } else if (countdown === 0) {\n      // Start the video when countdown reaches 0\n      if (referenceVideoRef.current) {\n        referenceVideoRef.current.play();\n        setIsPlaying(true);\n        setIsVideoEnded(false);\n        setSimilarityScore(null);\n      }\n      setCountdown(null);\n    }\n    return () => {\n      if (timer) clearTimeout(timer);\n    };\n  }, [countdown]);\n\n  const togglePlayPause = () => {\n    if (referenceVideoRef.current) {\n      if (isPlaying) {\n        referenceVideoRef.current.pause();\n        setIsPlaying(false);\n        setIsVideoEnded(true);\n      } else {\n        startCountdown();\n      }\n    }\n  };\n\n  const restartVideo = () => {\n    if (referenceVideoRef.current) {\n      referenceVideoRef.current.currentTime = 0;\n      setIsPlaying(false);\n      setIsVideoEnded(true);\n      setSimilarityScore(null);\n    }\n  };\n\n  const handleReferenceVideoLoad = () => {\n    if (referenceVideoRef.current) {\n      setIsReferenceVideoReady(true);\n    }\n  };\n\n  useEffect(() => {\n    let animationFrameId;\n    let lastProcessTime = 0;\n    const processInterval = 1000 / 30; // Process at 30fps\n\n    const processFrame = async (timestamp) => {\n      if (timestamp - lastProcessTime >= processInterval) {\n        try {\n          if (videoRef.current && poseRef.current && isWebcamReady) {\n            await poseRef.current.send({ image: videoRef.current });\n          }\n          if (referenceVideoRef.current && referencePoseRef.current && isReferenceVideoReady && isPlaying) {\n            await referencePoseRef.current.send({ image: referenceVideoRef.current });\n          }\n          lastProcessTime = timestamp;\n        } catch (error) {\n          console.error(\"Error processing frame:\", error);\n        }\n      }\n      animationFrameId = requestAnimationFrame(processFrame);\n    };\n\n    processFrame(0);\n    return () => {\n      if (animationFrameId) {\n        cancelAnimationFrame(animationFrameId);\n      }\n    };\n  }, [isWebcamReady, isReferenceVideoReady, isPlaying]);\n\n  // WebRTC configuration\n  const configuration = {\n    iceServers: [\n      { urls: 'stun:stun.l.google.com:19302' }\n    ]\n  };\n\n  // Initialize WebRTC\n  const initializeWebRTC = async () => {\n    try {\n      const pc = new RTCPeerConnection(configuration);\n      pcRef.current = pc;\n\n      // Handle incoming tracks\n      pc.ontrack = (event) => {\n        setRemoteStream(event.streams[0]);\n        if (remoteVideoRef.current) {\n          remoteVideoRef.current.srcObject = event.streams[0];\n        }\n      };\n\n      // Handle ICE candidates\n      pc.onicecandidate = (event) => {\n        if (event.candidate) {\n          handleIceCandidateFunction({\n            roomId,\n            playerId,\n            candidate: event.candidate\n          });\n        }\n      };\n\n      // Get local stream\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n      stream.getTracks().forEach(track => {\n        pc.addTrack(track, stream);\n      });\n\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n      }\n\n      return pc;\n    } catch (error) {\n      console.error('Error initializing WebRTC:', error);\n    }\n  };\n\n  // Handle signaling\n  const handleSignaling = async (pc) => {\n    if (isHost) {\n      // Create and send offer\n      const offer = await pc.createOffer();\n      await pc.setLocalDescription(offer);\n      await handleOfferFunction({\n        roomId,\n        playerId,\n        offer\n      });\n\n      // Listen for answer\n      const unsubscribe = onSnapshot(doc(db, 'rooms', roomId), async (doc) => {\n        const data = doc.data();\n        const answer = data.signaling?.answers?.[playerId];\n        if (answer && !pc.currentRemoteDescription) {\n          await pc.setRemoteDescription(new RTCSessionDescription(answer));\n        }\n      });\n\n      return unsubscribe;\n    } else {\n      // Listen for offer\n      const unsubscribe = onSnapshot(doc(db, 'rooms', roomId), async (doc) => {\n        const data = doc.data();\n        const offer = data.signaling?.offers?.[data.hostId];\n        if (offer && !pc.currentRemoteDescription) {\n          await pc.setRemoteDescription(new RTCSessionDescription(offer));\n          const answer = await pc.createAnswer();\n          await pc.setLocalDescription(answer);\n          await handleAnswerFunction({\n            roomId,\n            playerId,\n            answer\n          });\n        }\n      });\n\n      return unsubscribe;\n    }\n  };\n\n  // Create a new game room\n  const createRoom = async () => {\n    try {\n      const result = await createRoomFunction();\n      const roomId = result.data.roomId;\n      const pc = await initializeWebRTC();\n      \n      setRoomId(roomId);\n      setPlayerId(roomId);\n      setIsHost(true);\n      setGameState('waiting');\n\n      // Handle signaling\n      const unsubscribe = await handleSignaling(pc);\n\n      // Listen for room updates\n      onSnapshot(doc(db, 'rooms', roomId), (doc) => {\n        const data = doc.data();\n        if (data.gameStarted) {\n          startGame();\n        }\n        if (data.status === 'completed') {\n          setGameResults({\n            winnerId: data.winnerId,\n            scores: data.scores\n          });\n          setGameState('results');\n          unsubscribe();\n        }\n      });\n    } catch (error) {\n      console.error('Error creating room:', error);\n      alert('Failed to create game room');\n    }\n  };\n\n  // Join an existing room\n  const joinRoom = async () => {\n    try {\n      const playerId = Math.random().toString(36).substring(2, 8).toUpperCase();\n      await joinRoomFunction({ roomId, playerId });\n      const pc = await initializeWebRTC();\n      \n      setPlayerId(playerId);\n      setGameState('waiting');\n\n      // Handle signaling\n      const unsubscribe = await handleSignaling(pc);\n\n      // Listen for game start and results\n      onSnapshot(doc(db, 'rooms', roomId), (doc) => {\n        const data = doc.data();\n        if (data.gameStarted) {\n          startGame();\n        }\n        if (data.status === 'completed') {\n          setGameResults({\n            winnerId: data.winnerId,\n            scores: data.scores\n          });\n          setGameState('results');\n          unsubscribe();\n        }\n      });\n    } catch (error) {\n      console.error('Error joining room:', error);\n      alert('Failed to join game room');\n    }\n  };\n\n  // Start the game\n  const startGame = async () => {\n    try {\n      await startGameFunction({ roomId });\n      setGameState('playing');\n      startCountdown();\n    } catch (error) {\n      console.error('Error starting game:', error);\n      alert('Failed to start game');\n    }\n  };\n\n  // Submit score\n  const submitScore = async (score) => {\n    try {\n      await submitScoreFunction({\n        roomId,\n        playerId,\n        score\n      });\n    } catch (error) {\n      console.error('Error submitting score:', error);\n    }\n  };\n\n  // Connect to WebSocket\n  const connectWebSocket = () => {\n    const ws = new WebSocket(`ws://localhost:8000/ws/${roomId}/${playerId}`);\n    wsRef.current = ws;\n\n    ws.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'opponent_pose') {\n        // Update opponent's pose overlay\n        if (remoteVideoRef.current) {\n          const videoCtx = remoteVideoRef.current.getContext('2d');\n          videoCtx.clearRect(0, 0, remoteVideoRef.current.width, remoteVideoRef.current.height);\n          if (data.landmarks) {\n            window.drawConnectors(videoCtx, data.landmarks, window.POSE_CONNECTIONS,\n              { color: '#0000FF', lineWidth: 2 });\n            window.drawLandmarks(videoCtx, data.landmarks,\n              { color: '#FF00FF', lineWidth: 1, radius: 3 });\n          }\n        }\n      } else if (data.type === 'game_result') {\n        setGameResults(data);\n        setGameState('results');\n      }\n    };\n  };\n\n  // Send pose data to server\n  const sendPoseData = (landmarks) => {\n    if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\n      wsRef.current.send(JSON.stringify({\n        landmarks: landmarks,\n        reference_landmarks: referencePoseRef.current?.lastResults?.poseLandmarks\n      }));\n    }\n  };\n\n  return (\n    <div className=\"App\" style={{ textAlign: \"center\", padding: \"20px\" }}>\n      <h1>Dance Battle App</h1>\n\n      {gameState === 'lobby' && (\n        <div style={{\n          maxWidth: '600px',\n          margin: '0 auto',\n          padding: '20px',\n          textAlign: 'center'\n        }}>\n          <h1 style={{ fontSize: '48px', marginBottom: '40px' }}>Dance Battle</h1>\n          \n          <div style={{\n            backgroundColor: '#f0f0f0',\n            padding: '30px',\n            borderRadius: '15px',\n            marginBottom: '30px'\n          }}>\n            <h2 style={{ marginBottom: '20px' }}>Create Game</h2>\n            <button \n              onClick={createRoom}\n              style={{\n                ...buttonStyle,\n                fontSize: '24px',\n                padding: '15px 30px',\n                backgroundColor: '#4CAF50'\n              }}\n            >\n              Create New Game\n            </button>\n          </div>\n\n          <div style={{\n            backgroundColor: '#f0f0f0',\n            padding: '30px',\n            borderRadius: '15px'\n          }}>\n            <h2 style={{ marginBottom: '20px' }}>Join Game</h2>\n            <div style={{\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              gap: '15px'\n            }}>\n              <input\n                type=\"text\"\n                value={roomId}\n                onChange={(e) => setRoomId(e.target.value.toUpperCase())}\n                placeholder=\"Enter Game Code\"\n                style={{\n                  ...inputStyle,\n                  fontSize: '24px',\n                  textAlign: 'center',\n                  letterSpacing: '2px',\n                  textTransform: 'uppercase'\n                }}\n                maxLength={6}\n              />\n              <button \n                onClick={joinRoom}\n                style={{\n                  ...buttonStyle,\n                  fontSize: '24px',\n                  padding: '15px 30px',\n                  backgroundColor: '#2196F3'\n                }}\n              >\n                Join Game\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {gameState === 'waiting' && (\n        <div>\n          <h2>Room Code: {roomId}</h2>\n          <div style={{\n            backgroundColor: '#f0f0f0',\n            padding: '20px',\n            borderRadius: '10px',\n            margin: '20px auto',\n            maxWidth: '400px',\n            textAlign: 'center'\n          }}>\n            <p style={{ fontSize: '18px', marginBottom: '10px' }}>Share this code with your friend:</p>\n            <div style={{\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              gap: '10px'\n            }}>\n              <div style={{\n                backgroundColor: 'white',\n                padding: '10px 20px',\n                borderRadius: '5px',\n                fontSize: '24px',\n                fontWeight: 'bold',\n                letterSpacing: '2px'\n              }}>\n                {roomId}\n              </div>\n              <button\n                onClick={() => {\n                  navigator.clipboard.writeText(roomId);\n                  alert('Room code copied to clipboard!');\n                }}\n                style={{\n                  ...buttonStyle,\n                  backgroundColor: '#2196F3'\n                }}\n              >\n                Copy\n              </button>\n            </div>\n          </div>\n          <p>Waiting for opponent to join...</p>\n          {isHost && (\n            <button\n              onClick={() => {\n                updateDoc(doc(db, 'rooms', roomId), {\n                  gameStarted: true\n                });\n              }}\n              style={buttonStyle}\n            >\n              Start Game\n            </button>\n          )}\n        </div>\n      )}\n\n      {gameState === 'playing' && (\n        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '20px', justifyContent: 'center' }}>\n          {/* Reference Video */}\n          <div style={videoContainerStyle}>\n            <h3>Reference Dance</h3>\n            <div style={{ position: 'relative' }}>\n              <video\n                ref={referenceVideoRef}\n                src=\"/justdance1.mp4\"\n                playsInline\n                onLoadedMetadata={handleReferenceVideoLoad}\n                style={videoStyle}\n              />\n              <canvas\n                ref={referenceCanvasRef}\n                style={canvasOverlayStyle}\n              />\n            </div>\n          </div>\n\n          {/* Your Webcam */}\n          <div style={videoContainerStyle}>\n            <h3>Your Performance</h3>\n            <div style={{ position: 'relative' }}>\n              <video\n                ref={videoRef}\n                autoPlay\n                playsInline\n                style={{ ...videoStyle, transform: 'scaleX(-1)' }}\n              />\n              <canvas\n                ref={canvasRef}\n                style={{ ...canvasOverlayStyle, transform: 'scaleX(-1)' }}\n              />\n            </div>\n          </div>\n\n          {/* Opponent's Webcam */}\n          <div style={videoContainerStyle}>\n            <h3>Opponent's Performance</h3>\n            <div style={{ position: 'relative' }}>\n              <video\n                ref={remoteVideoRef}\n                autoPlay\n                playsInline\n                style={videoStyle}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n\n      {gameState === 'results' && gameResults && (\n        <div style={{\n          position: 'fixed',\n          top: '50%',\n          left: '50%',\n          transform: 'translate(-50%, -50%)',\n          backgroundColor: 'rgba(0, 0, 0, 0.8)',\n          color: 'white',\n          padding: '40px',\n          borderRadius: '20px',\n          textAlign: 'center',\n          zIndex: 1000\n        }}>\n          <h2>Game Results</h2>\n          <div style={{ fontSize: '24px', margin: '20px 0' }}>\n            {gameResults.winnerId === playerId ? 'You Won!' : 'Opponent Won!'}\n          </div>\n          <div style={{ margin: '20px 0' }}>\n            <p>Your Score: {gameResults.scores[playerId]}%</p>\n            <p>Opponent's Score: {gameResults.scores[gameResults.winnerId === playerId ? \n              (gameResults.winnerId === gameResults.scores.player1_id ? gameResults.scores.player2_id : gameResults.scores.player1_id) \n              : gameResults.winnerId]}%</p>\n          </div>\n          <button\n            onClick={() => {\n              setGameState('lobby');\n              setRoomId('');\n              setPlayerId('');\n              setGameResults(null);\n            }}\n            style={buttonStyle}\n          >\n            Play Again\n          </button>\n        </div>\n      )}\n\n      {/* Countdown Display */}\n      {countdown !== null && (\n        <div style={countdownStyle}>\n          {countdown}\n        </div>\n      )}\n\n      {/* Similarity Score Display */}\n      {isPlaying && !isVideoEnded && (\n        <div style={scoreStyle}>\n          Similarity Score: {similarityScore.toFixed(1)}%\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Styles\nconst buttonStyle = {\n  padding: '10px 20px',\n  fontSize: '16px',\n  backgroundColor: '#4CAF50',\n  color: 'white',\n  border: 'none',\n  borderRadius: '5px',\n  cursor: 'pointer',\n  margin: '5px'\n};\n\nconst inputStyle = {\n  padding: '10px',\n  fontSize: '16px',\n  margin: '5px',\n  width: '200px'\n};\n\nconst videoContainerStyle = {\n  position: 'relative',\n  width: '400px',\n  marginBottom: '20px'\n};\n\nconst videoStyle = {\n  width: '100%',\n  height: 'auto',\n  borderRadius: '12px',\n  boxShadow: '0 0 10px rgba(0,0,0,0.3)',\n  display: 'block'\n};\n\nconst canvasOverlayStyle = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  width: '100%',\n  height: '100%',\n  borderRadius: '12px'\n};\n\nconst countdownStyle = {\n  position: 'fixed',\n  top: '50%',\n  left: '50%',\n  transform: 'translate(-50%, -50%)',\n  backgroundColor: 'rgba(0, 0, 0, 0.7)',\n  color: 'white',\n  padding: '40px',\n  borderRadius: '50%',\n  fontSize: '72px',\n  fontWeight: 'bold',\n  width: '150px',\n  height: '150px',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  zIndex: 1000\n};\n\nconst scoreStyle = {\n  position: 'fixed',\n  top: '20px',\n  right: '20px',\n  backgroundColor: 'rgba(0, 0, 0, 0.7)',\n  color: 'white',\n  padding: '20px',\n  borderRadius: '10px',\n  fontSize: '24px',\n  fontWeight: 'bold'\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}